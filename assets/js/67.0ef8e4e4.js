(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{328:function(a,e,s){"use strict";s.r(e);var t=s(15),r=Object(t.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"setting-up-mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-mysql"}},[a._v("#")]),a._v(" Setting up MySQL")]),a._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#creating-a-database-for-pterodactyl"}},[a._v("Creating a database for Pterodactyl")]),e("ul",[e("li",[e("a",{attrs:{href:"#logging-in"}},[a._v("Logging In")])]),e("li",[e("a",{attrs:{href:"#creating-a-user"}},[a._v("Creating a user")])]),e("li",[e("a",{attrs:{href:"#create-a-database"}},[a._v("Create a database")])]),e("li",[e("a",{attrs:{href:"#assigning-permissions"}},[a._v("Assigning permissions")])])])]),e("li",[e("a",{attrs:{href:"#creating-a-database-host-for-nodes"}},[a._v("Creating a Database Host for Nodes")]),e("ul",[e("li",[e("a",{attrs:{href:"#creating-a-user"}},[a._v("Creating a user")])]),e("li",[e("a",{attrs:{href:"#assigning-permissions"}},[a._v("Assigning permissions")])]),e("li",[e("a",{attrs:{href:"#allowing-external-database-access"}},[a._v("Allowing external database access")])])])])])]),e("p"),a._v(" "),e("h2",{attrs:{id:"creating-a-database-for-pterodactyl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-database-for-pterodactyl"}},[a._v("#")]),a._v(" Creating a database for Pterodactyl")]),a._v(" "),e("p",[a._v("MySQL is a core component of Pterodactyl Panel but it can be confusing to setup and use if you've never done so before.\nThis is a very basic tutorial that skims just enough of the surface to set MySQL up and running with the panel.\nIf you're interested in learning more, there are some great tutorials available on the Internet.")]),a._v(" "),e("h3",{attrs:{id:"logging-in"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#logging-in"}},[a._v("#")]),a._v(" Logging In")]),a._v(" "),e("p",[a._v("The first step in this process is to login to the MySQL command line where we will be executing some statements to get\nthings setup. To do so, simply run the command below and provide the Root MySQL account's password that you setup when\ninstalling MySQL. If you do not remember doing this, chances are you can just hit enter as no password is set.")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# If using MariaDB (v11.0.0+)")]),a._v("\nmariadb "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("u root "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# If using MySQL")]),a._v("\nmysql "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("u root "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p\n")])])]),e("h3",{attrs:{id:"creating-a-user"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-user"}},[a._v("#")]),a._v(" Creating a user")]),a._v(" "),e("p",[a._v("For security sake, and due to changes in MySQL 5.7, you'll need to create a new user for the panel. To do so, we want\nto first tell MySQL to use the mysql database, which stores such information.")]),a._v(" "),e("p",[a._v("Next, we will create a user called "),e("code",[a._v("pterodactyl")]),a._v(" and allow logins from localhost which prevents any external connections\nto our database. You can also use "),e("code",[a._v("%")]),a._v(" as a wildcard or enter a numeric IP. We will also set the account password\nto "),e("code",[a._v("somePassword")]),a._v(".")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Remember to change 'somePassword' below to be a unique password specific to this account.")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("CREATE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("USER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pterodactyl'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("@'127.0.0.1'")]),a._v(" IDENTIFIED "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("BY")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'somePassword'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),e("h3",{attrs:{id:"create-a-database"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-a-database"}},[a._v("#")]),a._v(" Create a database")]),a._v(" "),e("p",[a._v("Next, we need to create a database for the panel. In this tutorial we will be naming the database "),e("code",[a._v("panel")]),a._v(", but you can\nsubstitute that for whatever name you wish.")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("CREATE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("DATABASE")]),a._v(" panel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),e("h3",{attrs:{id:"assigning-permissions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#assigning-permissions"}},[a._v("#")]),a._v(" Assigning permissions")]),a._v(" "),e("p",[a._v("Finally, we need to tell MySQL that our pterodactyl user should have access to the panel database. To do this, simply\nrun the command below.")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("GRANT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALL")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("PRIVILEGES")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ON")]),a._v(" panel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TO")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pterodactyl'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("@'127.0.0.1'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),e("h2",{attrs:{id:"creating-a-database-host-for-nodes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-database-host-for-nodes"}},[a._v("#")]),a._v(" Creating a Database Host for Nodes")]),a._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),e("p",[a._v("This section covers creating a MySQL user that has permission to create and modify users. This allows the Panel to create per-server databases on the given host.")])]),a._v(" "),e("h3",{attrs:{id:"creating-a-user-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-user-2"}},[a._v("#")]),a._v(" Creating a user")]),a._v(" "),e("p",[a._v("If your database is on a different host than the one where your Panel or Daemon is installed make sure to use the IP address of the machine the Panel is running on. If you use "),e("code",[a._v("127.0.0.1")]),a._v(" and try to connect externally, you will receive a connection refused error.")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# You should change the username and password below to something unique.")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("CREATE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("USER")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pterodactyluser'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("@'127.0.0.1'")]),a._v(" IDENTIFIED "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("BY")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'somepassword'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),e("h3",{attrs:{id:"assigning-permissions-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#assigning-permissions-2"}},[a._v("#")]),a._v(" Assigning permissions")]),a._v(" "),e("p",[a._v("The command below will give your newly created user the ability to create additional users, as well as create and destroy databases. As above, ensure "),e("code",[a._v("127.0.0.1")]),a._v(" matches the IP address you used in the previous command.")]),a._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("GRANT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALL")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("PRIVILEGES")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ON")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TO")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pterodactyluser'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("@'127.0.0.1'")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WITH")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("GRANT")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("OPTION")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),e("h3",{attrs:{id:"allowing-external-database-access"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#allowing-external-database-access"}},[a._v("#")]),a._v(" Allowing external database access")]),a._v(" "),e("p",[a._v("Chances are you'll need to allow external access to this MySQL instance in order to allow servers to connect to it. To do this, open "),e("code",[a._v("my.cnf")]),a._v(", which varies in location depending on your OS and how MySQL was installed. You can type "),e("code",[a._v("find /etc -iname my.cnf")]),a._v(" to locate it.")]),a._v(" "),e("p",[a._v("Open "),e("code",[a._v("my.cnf")]),a._v(", add text below to the bottom of the file and save it:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[mysqld]\nbind-address=0.0.0.0\n")])])]),e("p",[a._v("Restart MySQL/MariaDB to apply these changes. This will override the default MySQL configuration, which by default will only accept requests from localhost. Updating this will allow connections on all interfaces, and thus, external connections. Make sure to allow the MySQL port (default 3306) in your firewall.")]),a._v(" "),e("p",[a._v("If your Database and Wings are on the same machine and won't need external access, you can also use the "),e("code",[a._v("docker0")]),a._v(" interface IP address rather than "),e("code",[a._v("127.0.0.1")]),a._v(". This IP address can be found by running "),e("code",[a._v("ip addr | grep docker0")]),a._v(", and it likely looks like "),e("code",[a._v("172.x.x.x")]),a._v(".")]),a._v(" "),e("p",[a._v("Starting with MySQL 8.0.13 / MariaDB 10.11 or above, "),e("code",[a._v("bind_address")]),a._v(" now also accepts a comma-separated list of interfaces to give more control over what interfaces it will listen on and which not.")])])}),[],!1,null,null,null);e.default=r.exports}}]);